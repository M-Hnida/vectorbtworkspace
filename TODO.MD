‚úÖ STRUCTURE PROPOS√âE (Convention Google)
```
vectorflow/
‚îú‚îÄ‚îÄ vectorflow/                    # Package principal
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ core/                      # Logique m√©tier core
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portfolio_builder.py  # Anciennement: strategy_registry.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py         # Anciennement: data_manager.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ strategies/                # Strat√©gies de trading
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ donchian.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ grid.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ risk_premia.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ statistical_arbitrage.py  # Anciennement: sol_btc_stat_arb.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supertrend_grid.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _template.py           # Underscore = private/template
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ optimization/              # Tout ce qui concerne l'optimisation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ grid_search.py         # Extraction de optimizer.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ param_monte_carlo.py   # ‚≠ê RENOMM√â (Monte Carlo pour params)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ walk_forward.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ validation/                # ‚≠ê NOUVEAU - Analyses de robustesse
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ path_randomization.py  # ‚≠ê RENOMM√â (ex: monte_carlo_path.py)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bootstrap.py           # Futur: autres validations
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ visualization/             # ‚≠ê RENOMM√â
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plotters.py            # Anciennement: plotter.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.py           # Futur: Streamlit/Dash UI
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formatters.py          # Helpers pour formatting
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portfolio_metrics.py   # Anciennement: vbt_utils.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config_validator.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ cli.py                     # Anciennement: main.py
‚îÇ
‚îú‚îÄ‚îÄ config/                        # Configuration files
‚îÇ   ‚îú‚îÄ‚îÄ strategies/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ donchian.yaml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ settings.yaml              # Global settings
‚îÇ
‚îú‚îÄ‚îÄ tests/                         # ‚≠ê NOUVEAU dossier
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_strategies.py         # Anciennement: test_all_strategies.py
‚îÇ   ‚îú‚îÄ‚îÄ test_path_randomization.py # Anciennement: test_path_mc_robust.py
‚îÇ   ‚îú‚îÄ‚îÄ test_optimization.py
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/                  # Test data
‚îÇ
‚îú‚îÄ‚îÄ examples/                      # ‚≠ê NOUVEAU - Scripts d√©mo
‚îÇ   ‚îú‚îÄ‚îÄ quickstart.py
‚îÇ   ‚îú‚îÄ‚îÄ custom_strategy_example.py
‚îÇ   ‚îî‚îÄ‚îÄ batch_backtest.py
‚îÇ
‚îú‚îÄ‚îÄ scripts/                       # Scripts utilitaires (pas exemples)
‚îÇ   ‚îú‚îÄ‚îÄ download_data.py
‚îÇ   ‚îî‚îÄ‚îÄ benchmark_strategies.py
‚îÇ
‚îú‚îÄ‚îÄ data/                          # Data files (ignored in git)
‚îú‚îÄ‚îÄ .agent/                        # Workflow automation
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ setup.py                       # ‚≠ê NOUVEAU - Pour pip install
‚îú‚îÄ‚îÄ pyproject.toml                 # ‚≠ê NOUVEAU - Build config
‚îî‚îÄ‚îÄ README.md
```
üîÑ RENOMMAGES CL√âS (Priorit√© Haute)
1. Clarifier les Monte Carlo
python
# AVANT
optimizer.py::run_monte_carlo_analysis()         # Confus!
monte_carlo_path.py::run_path_randomization_mc() # Confus!

# APR√àS
optimization/param_monte_carlo.py::run_parameter_sensitivity()
validation/path_randomization.py::run_path_randomization()
2. Fichiers principaux
Ancien	Nouveau	Raison
main.py	cli.py ou vectorflow/cli.py	Convention: main.py = entry point standalone
strategy_registry.py	core/portfolio_builder.py	Plus descriptif
data_manager.py	core/data_loader.py	Verbe ‚Üí action claire
plotter.py	visualization/plotters.py	Pluriel + dossier
walk_forward.py	optimization/walk_forward.py	M√™me cat√©gorie que optimisation
vbt_utils.py	utils/portfolio_metrics.py	Descriptif, pas d'abr√©viation
monte_carlo_path.py	validation/path_randomization.py	‚≠ê Clair et pr√©cis
optimizer.py	Split en optimization/grid_search.py + optimization/param_monte_carlo.py	S√©paration responsabilit√©s
3. Noms de fonctions (Coh√©rence)
python
# Optimizer / Parameter Sensitivity
run_parameter_sensitivity()      # Au lieu de run_monte_carlo_analysis()
sample_random_parameters()       # OK

# Path Randomization
run_path_randomization()         # Au lieu de run_path_randomization_mc()
shuffle_returns()                # OK - priv√©e
bootstrap_trades()               # OK - priv√©e

# Plotting
plot_parameter_sensitivity()     # Au lieu de plot_monte_carlo()
plot_path_randomization()        # Au lieu de plot_path_mc_results()
üìù PLAN DE MIGRATION (√âtapes)
Phase 1: Renommages Simples (Pas de breaking changes)
bash
# 1. Cr√©er structure
mkdir -p vectorflow/{core,optimization,validation,visualization}
mkdir tests examples

# 2. D√©placer fichiers (avec alias temporaires)
mv monte_carlo_path.py validation/path_randomization.py
mv walk_forward.py optimization/
mv plotter.py visualization/plotters.py

# 3. Cr√©er __init__.py avec r√©-exports pour compatibilit√©
# vectorflow/__init__.py
from .validation.path_randomization import run_path_randomization as run_path_randomization_mc  # Backward compat
Phase 2: Refactoring optimizer.py
python
# optimization/param_monte_carlo.py
def run_parameter_sensitivity(...):  # Nouveau nom clair
    """Monte Carlo parameter sensitivity analysis."""
    pass

# optimization/grid_search.py  
def run_grid_optimization(...):
    """Grid search optimization."""
    pass
Phase 3: Tests
bash
mv test_*.py tests/
mv debug_*.py examples/ ou scripts/
üí° RECOMMANDATIONS ADDITIONNELLES
Naming Conventions √† suivre:
‚úÖ Modules: lowercase_with_underscores.py
‚úÖ Classes: CapWords (ex: ParameterSensitivityAnalyzer)
‚úÖ Fonctions: lowercase_with_underscores()
‚úÖ Constantes: UPPER_WITH_UNDERSCORES
‚úÖ Private: _leading_underscore
Docstrings (Google Style):
python
def run_path_randomization(portfolio, n_simulations=1000, method="shuffle"):
    """Tests strategy robustness by randomizing event sequence.
    
    Args:
        portfolio: VectorBT Portfolio object to analyze
        n_simulations: Number of randomized paths to generate
        method: Randomization method ('shuffle', 'bootstrap', 'block')
    
    Returns:
        dict: Statistics including p-values, percentiles, and distributions
        
    Raises:
        ValueError: If portfolio has no trades or zero variance
    """

---

## üî¨ **VALIDATION STATISTIQUE AUTOMATIQUE** (√âviter overfitting / data snooping)

### Probl√®me
- Actuellement: on regarde Sharpe/Return sans savoir si c'est statistiquement significatif
- Risque: Strat√©gie profitable par hasard (ex: 5% de 100 tests passeront par pur luck)

### Solution: Module `validation/statistical_tests.py`

**Features √† impl√©menter:**

1. **Sharpe significance test** (Jobson & Korkie 1981)
   - Test si Sharpe > 0 avec robustesse non-normalit√©
   - Prend en compte skew et kurtosis
   - Output: p-value + conclusion claire

2. **Minimum trades check**
   - Warning si < 30 trades (pas assez pour stats)
   - Calcul automatique intervalle confiance

3. **Autocorrelation test** (Ljung-Box)
   - D√©tecte lookahead bias potentiel
   - Returns ne devraient PAS √™tre autocorr√©l√©s

4. **Win rate sanity check**
   - Flag si >95% (suspect, check lookahead)
   - Flag si <20% (probablement cass√©)

5. **Multiple testing adjustment** (Harvey 2017)
   - Si N variantes test√©es ‚Üí Bonferroni correction
   - Haircut Sharpe: `adjusted = observed - sqrt(N) * 0.5`

**Int√©gration dans main.py:**
- Appel automatique apr√®s chaque backtest
- Print warnings clairs si fails
- Option `--skip-validation` pour d√©sactiver

**Effort estim√©:** 2-3h
**Impact:** Critique - √©vite self-deception

---

## ‚úÖ **CHECKLIST DE VALIDATION INTERACTIVE**

### Probl√®me
- Pas de guide syst√©matique pour √©viter erreurs communes
- Utilisateurs oublient checks basiques (lookahead, survivorship bias, etc.)

### Solution: Module `validation/checklist.py`

**Cat√©gories:**

1. **Data Quality** (5 checks)
   - No future data leakage
   - No survivorship bias
   - Timezone consistency
   - No unexplained gaps
   - Volume data realistic

2. **Strategy Logic** (4 checks)
   - Signals use only past data (t-1, not t)
   - No intraday lookahead (open vs close)
   - Execution delays modeled
   - Rebalancing frequency realistic

3. **Optimization** (4 checks)
   - Walk-forward completed
   - Holdout set tested (20% unseen)
   - Performance consistent across periods
   - Parameter count reasonable (data/params > 20)

4. **Robustness** (4 checks)
   - Path randomization MC passed (p < 0.05)
   - Sharpe statistically significant
   - Minimum 30 trades
   - Beats buy-and-hold benchmark

**Modes:**
- Interactive: CLI avec input y/n
- Auto: Appelle validation stats o√π possible
- Report: Generate PDF checklist

**Int√©gration:**
- Appel optionnel: `python main.py --strategy X --validate`
- Output: Score X/17 passed + detailed report

**Effort estim√©:** 3-4h  
**Impact:** Fort - p√©dagogique + pr√©vient erreurs

---

## üìä **BUY-AND-HOLD BENCHMARK (Simple print)**

### Probl√®me
- Pas de comparaison automatique vs benchmark simple
- Utilisateurs peuvent c√©l√©brer strat√©gie qui ne bat m√™me pas B&H

### Solution: 3 lignes dans `print_aggregated_portfolio_stats()`

```python
# Apr√®s ligne 227 dans main.py
# Add buy-and-hold comparison
bh_portfolio = vbt.Portfolio.from_holding(close=primary_data['close'], init_cash=10000)
bh_return = bh_portfolio.total_return()
print(f"üìå Buy & Hold Benchmark: {bh_return:.2f}%")
print(f"   {'‚úÖ Outperforms' if avg_return > bh_return else '‚ö†Ô∏è Underperforms'} B&H by {avg_return - bh_return:+.2f}%")