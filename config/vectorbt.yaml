name: "vectorbt_strategy"
parameters:
  # Portfolio settings
  cash: 500000
  fees: 0.0004
  slippage: 0.001
  initial_cash: 500000
 
  # Volatility-adaptive windowing (ATR%-based)
  base_window: 50          # base window length for adaptation
  atr_len: 14              # ATR calculation length
  atr_smooth: 50           # rolling mean window for ATR% smoothing
  atr_clip_low: 0.6        # lower clip for ATR%/mean ratio
  atr_clip_high: 1.5       # upper clip for ATR%/mean ratio
  use_adaptive_tema: false # when true, proportional scaling of TEMA lengths from adaptive window
  confirm_on_close: true   # confirm signals on closed bar (edge-detection for entries)
  discrete_exits: false    # when true, exits use edge-detection as well
 
  # Dual-trend TEMA lengths
  tema_fast: 10
  tema_slow: 30
  tema_long_fast: 50
  tema_long_slow: 150
  require_both_trends: true
 
  # CMO z-score trigger
  cmo_len: 20
  cmo_z_window: 50
  cmo_z_threshold: 0.5
 
  # Trading toggles
  allow_shorts: true
 
  # Sizing & stops (optional; used by get_vbt_params)
  size_mode: "none"        # 'none'|'fixed_cash'|'risk_atr'|'units'
  fixed_cash: 0.0          # per-trade cash if size_mode='fixed_cash'
  units: 0.0               # fixed units if size_mode='units'
  risk_per_trade: 0.01     # equity fraction risk per trade if size_mode='risk_atr'
  atr_len_size: 14         # ATR length for sizing/SL
  atr_mult_stop: 2.0       # SL distance in ATR multiples if stop_mode='atr'
  stop_mode: "atr"         # 'atr'|'percent'
  stop_percent: 0.02       # 2% stop if stop_mode='percent'
  take_profit_mult: null   # optional TP in ATR multiples (e.g., 3.0); null to disable
 
  # Multi-timeframe settings
  required_timeframes:
    - "4h"
 
optimization_grid:
  base_window: [40, 50, 60]
  atr_len: [10, 14, 20]
  atr_smooth: [30, 50, 80]
  atr_clip_low: [0.5, 0.6, 0.8]
  atr_clip_high: [1.3, 1.5, 1.8]
  use_adaptive_tema: [false, true]
  confirm_on_close: [true]
 
  tema_fast: [8, 10, 12]
  tema_slow: [25, 30, 40]
  tema_long_fast: [40, 50, 70]
  tema_long_slow: [120, 150, 200]
 
  cmo_len: [14, 20, 28]
  cmo_z_window: [30, 50, 80]
  cmo_z_threshold: [0.3, 0.5, 0.8]
 
  # Optional sizing grid examples (kept small by default)
  risk_per_trade: [0.005, 0.01]
 
analysis_settings:
  monte_carlo_runs: 200
  optimization:
    enable_parallel: true
    max_workers: 4
    early_stopping: true
    early_stopping_patience: 10
 
csv_path:
  - "data/btc_4h_2018-2025.csv"